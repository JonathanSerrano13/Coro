<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crear Evento</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/crearEvento.css') }}">
</head>

<body>
      <form action="{{ url_for('crearEvento') }}" method="POST">
        <div class="contenedor">
            <h1>Crear evento</h1>

            <label for="nombre_evento">Nombre del evento:</label>
            <input type="text" id="nombre_evento" name="nombre_evento" placeholder="Nombre del evento" required>

            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" name="fecha" required>

            <label for="hora">Hora:</label>
            <input type="time" id="hora" name="hora" required>

            <label for="ubicacion">Ubicaci贸n:</label>
            <input type="text" id="ubicacion" name="ubicacion" placeholder="Direcci贸n del evento" required>

            <label for="descripcion">Descripci贸n:</label>
            <textarea id="descripcion" name="descripcion" rows="3" placeholder="Descripci贸n del evento..."></textarea>

            <input type="hidden" name="id_lista" value="{{ session.get('temp_lista_id', 0) }}">
            
                <div class="acciones">
                    <button type="button" id="cancelarEvento" onclick="window.location.href='{{ url_for('eventos') }}'">Regresar</button>
                    <button type="button" onclick="window.location.href='{{ url_for('lista_canciones', temp_lista_id=session.get("temp_lista_id", 0)) }}'">Canciones</button>
                    <button type="submit">Crear</button>
                </div>
            </div>
    </form>


    <script>
        document.getElementById('cancelarEvento').addEventListener('click', function () {
    fetch('/eliminar_listas_temporales', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                console.log('Listas temporales eliminadas.');
                window.location.href = "{{ url_for('eventos') }}";
            } else {
                console.error('Error al eliminar listas temporales.');
            }
        })
        .catch(error => console.error('Error al procesar la solicitud:', error));
});
    </script>
</body>

</html>